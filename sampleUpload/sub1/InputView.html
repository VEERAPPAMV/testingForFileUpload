<html>
<head></head>
<body>this is the file uploaded to git hub</body>
WITH ORDERBY_RESULT AS
  (SELECT CNI.ITEM_ID,
    CNI.CNESTG_ITEM_ID,
    CNI.PART_NUMBER,
    CNI.MANUFACTURER_PART_NUMBER,
    CNI.UPC,
    CNI.MANUFACTURER_NAME,
    CNI.BRAND_NAME,
    CNI.EXT_SYS_MFR_NAME,
    CNI.EXT_SYS_BRAND_NAME,
    CNI.LIST_PRICE,
    CNI.ES_ITEM_ID,
    CNILOC.SHORT_DESC
  FROM CNESTG_ITEM_MASTER CNI,
    CNESTG_LOC_ITEM_MASTER CNILOC
  WHERE CNI.CNESTG_ITEM_ID       =CNILOC.CNESTG_ITEM_ID(+)
  AND CNI.CNE_BATCH_ID           =52690
  AND CNI.CNE_BATCH_ID           =CNILOC.CNE_BATCH_ID(+)
  AND NVL(CNI.ACTIVE,'_')       !='D'
  AND NVL('',NVL(CNI.ACTIVE,'_'))=NVL(CNI.ACTIVE,'_')
  AND (CNI.PART_NUMBER          IN
    (SELECT IM.PART_NUMBER
    FROM ITEM_MASTER IM
    WHERE IM.ACTIVE    != 'D'
    AND IM.PART_NUMBER IN
      (SELECT PART_NUMBER
      FROM
        (SELECT CIIL.PART_NUMBER,
          ROW_NUMBER() OVER (PARTITION BY CIIL.PART_NUMBER ORDER BY CIIL.PART_NUMBER) AS ROWNUMBER
        FROM CNESTG_ITEM_IMAGE_LIST CIIL
        WHERE CIIL.CNE_BATCH_ID = 52690
        AND IMAGE_NAME NOT     IN
          (SELECT IMAGE_NAME
          FROM ITEM_IMAGES II,
            ITEM_IMAGE_LIST IIL,
            ITEM_MASTER IM
          WHERE IM.ITEM_ID      =IIL.ITEM_ID
          AND IIL.ITEM_IMAGES_ID=II.ITEM_IMAGE_ID
          AND IM.PART_NUMBER    =CIIL.PART_NUMBER
          )
        )
      WHERE ROWNUMBER = 1
      )
    )
    OR 0 !=
    (
      (SELECT COUNT(1)
      FROM
        (SELECT CIIL.PART_NUMBER,
          ROW_NUMBER() OVER (PARTITION BY CIIL.PART_NUMBER ORDER BY CIIL.PART_NUMBER) AS ROWNUMBER
        FROM CNESTG_ITEM_IMAGE_LIST CIIL
        WHERE CIIL.CNE_BATCH_ID = 52690
       AND CIIL.PART_NUMBER =CNI.PART_NUMBER
        
        )
      WHERE ROWNUMBER = 1
      ))
    )
  ORDER BY CNI.PART_NUMBER
  )
SELECT ITEM_ID,
  CNESTG_ITEM_ID,
  MANUFACTURER_NAME,
  BRAND_NAME,
  EXT_SYS_MFR_NAME,
  EXT_SYS_BRAND_NAME,
  PART_NUMBER,
  MANUFACTURER_PART_NUMBER,
  UPC,
  LIST_PRICE,
  ES_ITEM_ID,
  SHORT_DESC
FROM
  (SELECT ITEM_ID,
    CNESTG_ITEM_ID,
    MANUFACTURER_NAME,
    BRAND_NAME,
    PART_NUMBER,
    EXT_SYS_MFR_NAME,
    EXT_SYS_BRAND_NAME,
    MANUFACTURER_PART_NUMBER,
    UPC,
    LIST_PRICE,
    ES_ITEM_ID,
    SHORT_DESC ,
    ROWNUM RN
  FROM
    (SELECT * FROM ORDERBY_RESULT
    )
  WHERE ROWNUM<=10
  )
WHERE RN>=1

</html>